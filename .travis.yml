dist: trusty
sudo: required
language: cpp
addons:
  artifacts: true
install:
- echo "deb http://pkg.mxe.cc/repos/apt/debian wheezy main" | sudo tee -a /etc/apt/sources.list
- sudo  apt-key adv --keyserver keyserver.ubuntu.com --recv-keys D43A795B73B16ABE9643FE1AFD8FFF16DB45C6AB
#- sudo apt-get update
#- sudo apt-get install -y mxe-i686-w64-mingw32.shared-qtbase tar
#- PATH=${PATH}:/usr/lib/mxe/usr/bin
#- git submodule init && git submodule update
before_script:
- mkdir build
- cd build
#- i686-w64-mingw32.shared-cmake -DCMAKE_BUILD_TYPE=Release .. -DCMAKE_INSTALL_PREFIX=${TRAVIS_BUILD_DIR}
#  -DOPTION_BUILD_CCVIEWER=OFF

script:
#- make -j2 install
- echo ${TRAVIS_BUILD_DIR}
- cd ${TRAVIS_BUILD_DIR}
- mkdir CloudCompare ; cd CloudCompare; touch file.txt; cd ${TRAVIS_BUILD_DIR}
- tar -zcvf cloudcompare-latest.tar.gz CloudCompare

deploy:
  provider: releases
  api_key:
    secure: P4lYE8L5Z3I36hn7syUtDjZ4q4vcyaXdpjgPd6tfnhDGg3V5NJqud+0G240V3Cp0//T4PJSKaTSrQ/8/SmFyzcP16f0ypSmddfpIN/O1pJMImptkO1FF8dR/vxHw02RJtYjxk4Znzs19u2okr9Ikft0cJwFHP7T+cPY+0shzNjc=
  file: CloudCompare
  skip_cleanup: true
  on:
    repo: luca-penasa/trunk
    branch: newtravis

