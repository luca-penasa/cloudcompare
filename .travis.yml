dist: trusty
sudo: required

language:
    cpp



install:
    - ls /etc/apt/
    - ls /etc/apt/sources.list.d

    - echo "deb http://pkg.mxe.cc/repos/apt/debian wheezy main" | sudo tee -a /etc/apt/sources.list

    -  sudo  apt-key adv --keyserver keyserver.ubuntu.com --recv-keys D43A795B73B16ABE9643FE1AFD8FFF16DB45C6AB
    -  sudo apt-get update
    -  sudo apt-get install -y mxe-i686-w64-mingw32.shared-qt 
    -  PATH=${PATH}:/usr/lib/mxe/usr/bin

    # CC submodules
    - git submodule init && git submodule update
    #stuff
   


before_script:    

    - mkdir build
    - cd build
    - i686-w64-mingw32.shared-cmake -DCMAKE_BUILD_TYPE=Release


      # -DOPTION_USE_GDAL=ON
      # -DINSTALL_QKINECT_PLUGIN=ON
      # -DLIBFREENECT_INCLUDE_DIR="/usr/include"
      # -DLIBFREENECT_LIBRARY_FILE="/usr/lib/x86_64-linux-gnu/libfreenect.so"

      # For now:
      # - qRansacSD fails on Clang
      # - no libav/FFMPEG. Version in repos is < 10.7 (no frame.h)
      # - could not use CGAL from Ubuntu (< 4.3)

script:
    # We use only 4 core because gcc and clang can be memory hungry
    - make -j2
